(this.webpackJsonpmg_rulebook=this.webpackJsonpmg_rulebook||[]).push([[0],{145:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(41),s=n.n(c),a=n(18),u=n(37),i=n.n(u),o=n(63),j=n(106),d=n.n(j),b={getData:function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("http://sluhtala-magic-rules.herokuapp.com/rules.txt");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()};var l={parseData:function(e){var t={headers:[],subHeaders:[],rules:[]},n=e.split("\n\r").map((function(e){return e.trim()})),r=n.indexOf("1. Game Concepts"),c=n.lastIndexOf("Glossary");return n.slice(r,c).forEach((function(e,n){var r=e.substring(0,e.indexOf(" "));if(/^[1-9]\.$/.test(r))t.headers.push({id:n,text:e});else if(/^[1-9][0-9][0-9]\.$/.test(r))t.subHeaders.push({id:n,text:e});else{if(0===e.length)return;var c=parseInt(e.substr(0,1)),s=parseInt(e.substring(0,e.indexOf(".")));t.rules.push({id:n,text:e,headerNum:c,subNum:s})}})),t}},f=n(167),h=n(162),O=n(163),x=n(46),m=(n(137),n(3)),p=function(e){return Object(m.jsx)(m.Fragment,{children:e.hide?"":e.children})},v=function(e,t){return""===t?e:e.filter((function(e){return e.text.includes(t)}))},g=function(e,t,n){return""===n?e:e.filter((function(e){var n=parseInt(e.text.substring(0,1));return t.some((function(e){return e.headerNum===n}))}))},w=function(e,t,n){return""===n?e:e.filter((function(e){var n=parseInt(e.text.substr(0,e.text.indexOf(".")));return t.some((function(e){return e.subNum===n}))}))},S=n(166),k=n(161),C=function(e){var t=e.header;return Object(m.jsx)("h3",{children:t})},I=function(e){var t=e.headers;return t&&t.map?Object(m.jsx)(m.Fragment,{children:t.map((function(e){return Object(m.jsx)(C,{header:e.text},e.id)}))}):""},y=function(e){var t=e.sub;return Object(m.jsx)("li",{children:t})},E=function(e){var t=e.headers;return Object(m.jsx)("ul",{children:t.map((function(e){return Object(m.jsx)(y,{sub:e.text},e.id)}))})},T=n(146),A=n(165),F=n(164),H=n(159),D=function(e){var t=e.rule,n=e.activeIndex,r=e.id,c=e.setActiveIndex,s=e.setSearch,a=t.substring(0,t.indexOf(" ")),u=t.substring(t.indexOf(" ")+1),i=u.substring(0,30);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(A.a.Title,{index:r,active:n===r,onClick:function(){c(r===n?-1:r)},children:[Object(m.jsx)(x.a,{name:"dropdown"}),Object(m.jsx)("b",{children:a}),n!==r&&Object(m.jsxs)(m.Fragment,{children:[" ",i,"..."]})]}),Object(m.jsx)(A.a.Content,{active:n===r,children:Object(m.jsx)(F.a,{duration:500,animation:"fade down",visible:n===r,children:Object(m.jsx)("div",{children:function(e){var t=e.split("\n"),n=/[1-9][0-9][0-9]\.?[0-9]?[a-z]?/;return t.map((function(e,t){return Object(m.jsx)("div",{children:e.split(/([ (,)])/).map((function(e,t){return n.test(e)?Object(m.jsx)(T.a,{size:"tiny",secondary:!0,circular:!0,compact:!0,basic:!0,onClick:function(){var t;"."===(t=e)[t.length-1]?s(t.substring(0,t.length-1)):s(t)},children:e},t):e}))},t)}))}(u)})})})]})},N=function(e){var t=e.rules,n=e.setSearch,c=e.showMore,s=e.displayAmount,u=Object(r.useState)(-1),i=Object(a.a)(u,2),o=i[0],j=i[1],d=Object(r.useState)([]),b=Object(a.a)(d,2),l=b[0],f=b[1],h=Object(r.useState)(!1),O=Object(a.a)(h,2),x=O[0],p=O[1];Object(r.useEffect)((function(){f(t.slice(0,s)),p(!1)}),[s,t]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(A.a,{styled:!0,fluid:!0,children:l.map((function(e,t){return Object(m.jsx)(D,{id:e.id,rule:e.text,activeIndex:o,setActiveIndex:j,setSearch:n},e.id)}))}),t.length>s&&Object(m.jsx)(H.a,{onOnScreen:function(){p(!0),setTimeout((function(){c()}),500)},continuous:!0,children:Object(m.jsx)(T.a,{loading:x,icon:"arrow down",onClick:function(){return c()}})})]})},z=n(160),B=function(e){var t=e.value,n=e.onChange;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(z.a,{placeholder:"search",fluid:!0,icon:"search",value:t,onChange:n})})},G=function(e){var t=e.rBook,n=Object(r.useState)([]),c=Object(a.a)(n,2),s=c[0],u=c[1],j=Object(r.useState)([]),d=Object(a.a)(j,2),b=d[0],l=d[1],f=Object(r.useState)(0),h=Object(a.a)(f,2),O=h[0],x=h[1],p=Object(r.useState)(""),C=Object(a.a)(p,2),y=C[0],T=C[1],A=Object(r.useState)(30),F=Object(a.a)(A,2),H=F[0],D=F[1];Object(r.useEffect)((function(){D(30)}),[y]),Object(r.useEffect)((function(){var e=setTimeout(Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(v(t.rules,y));case 1:case"end":return e.stop()}}),e)}))),100);return function(){clearTimeout(e)}}),[y,t.rules]),Object(r.useEffect)((function(){x(s.length)}),[s]);return Object(r.useEffect)((function(){var e=setTimeout(Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(g(t.headers,s,y));case 1:case"end":return e.stop()}}),e)}))),100);return function(){clearTimeout(e)}}),[s,y,t.headers]),t.headers&&t.subHeaders&&t.rules?Object(m.jsx)(S.a,{stackable:!0,children:Object(m.jsxs)(S.a.Row,{columns:2,divided:!0,children:[Object(m.jsxs)(S.a.Column,{width:5,children:[Object(m.jsx)(I,{headers:b}),Object(m.jsx)(E,{headers:w(t.subHeaders,s,y)})]}),Object(m.jsxs)(S.a.Column,{width:11,children:[Object(m.jsxs)(S.a.Row,{children:[Object(m.jsx)(B,{value:y,onChange:function(e){var t=e.target;T(t.value)}}),O," results found"]}),Object(m.jsxs)(S.a.Row,{children:[Object(m.jsx)(k.a,{}),Object(m.jsx)(N,{rules:s,setSearch:T,displayAmount:H,showMore:function(){D(H+30)}})]})]})]})}):""};var M=function(){var e=Object(r.useState)({}),t=Object(a.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(!1),u=Object(a.a)(s,2),i=u[0],o=u[1],j=Object(r.useState)(!1),d=Object(a.a)(j,2),v=d[0],g=d[1];return Object(r.useEffect)((function(){o(!0),setTimeout((function(){b.getData().then((function(e){c(l.parseData(e)),o(!1)})).catch((function(e){console.error(e),g(!0),o(!1)}))}),1e3)}),[]),Object(m.jsxs)("div",{children:[Object(m.jsx)(f.a,{inverted:!0,basic:!0,children:"An unofficial Magic: The Gathering -rulebook"}),Object(m.jsxs)(h.a,{fluid:!0,textAlign:"left",text:!0,children:[Object(m.jsx)(O.a,{active:i}),Object(m.jsx)(p,{hide:!v,children:Object(m.jsx)(x.a,{name:"x",size:"massive",color:"red"})}),n.headers&&n.subHeaders&&n.rules&&Object(m.jsx)(G,{rBook:n})]})]})};s.a.render(Object(m.jsx)(M,{}),document.getElementById("root"))}},[[145,1,2]]]);
//# sourceMappingURL=main.73e9ec8e.chunk.js.map