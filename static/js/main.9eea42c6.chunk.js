(this.webpackJsonpmg_rulebook=this.webpackJsonpmg_rulebook||[]).push([[0],{131:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(32),s=r.n(c),u=r(16),a=r(29),i=r.n(a),o=r(48),f=r(89),j=r.n(f),b={getData:function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("https://media.wizards.com/2021/downloads/MagicCompRules%2020210419.txt");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()};var d={parseData:function(e){var t={headers:[],subHeaders:[],rules:[]},r=e.split("\n\r").map((function(e){return e.trim()})),n=r.indexOf("1. Game Concepts"),c=r.lastIndexOf("Glossary");return r.slice(n,c).forEach((function(e,r){var n=e.substring(0,e.indexOf(" "));if(/^[1-9]\.$/.test(n))t.headers.push({id:r,text:e});else if(/^[1-9][0-9][0-9]\.$/.test(n))t.subHeaders.push({id:r,text:e});else{if(0===e.length)return;var c=parseInt(e.substr(0,1)),s=parseInt(e.substring(0,e.indexOf(".")));t.rules.push({id:r,text:e,headerNum:c,subNum:s})}})),t}},l=r(147),O=r(148),h=r(35),x=(r(84),r(2)),p=function(e){return Object(x.jsx)(x.Fragment,{children:e.hide?"":e.children})},m=function(e,t){return""===t?e:e.filter((function(e){return e.text.includes(t)}))},v=function(e,t,r){return""===r?e:e.filter((function(e){var r=parseInt(e.text.substring(0,1));return t.some((function(e){return e.headerNum===r}))}))},g=function(e,t,r){return""===r?e:e.filter((function(e){var r=parseInt(e.text.substr(0,e.text.indexOf(".")));return t.some((function(e){return e.subNum===r}))}))},w=r(132),k=function(e){var t=e.headers;if(!t||!t.map)return"";var r=function(e){var t=e.header;return Object(x.jsx)("h2",{children:t})};return Object(x.jsx)(x.Fragment,{children:t.map((function(e){return Object(x.jsx)(r,{header:e.text},e.id)}))})},S=function(e){var t=e.headers,r=function(e){var t=e.sub;return Object(x.jsx)("li",{children:t})};return Object(x.jsx)("ul",{children:t.map((function(e){return Object(x.jsx)(r,{sub:e.text},e.id)}))})},E=function(e){var t=e.rules,r=function(e){var t=e.rule;return Object(x.jsx)("p",{children:t})};return Object(x.jsx)(x.Fragment,{children:t.map((function(e,t){return Object(x.jsx)(r,{rule:e.text},e.id)}))})},I=function(e){var t=e.rBook,r=e.search,c=e.setIsLoading,s=Object(n.useState)([]),a=Object(u.a)(s,2),f=a[0],j=a[1],b=Object(n.useState)([]),d=Object(u.a)(b,2),l=d[0],O=d[1],h=Object(n.useState)(1),p=Object(u.a)(h,2),I=p[0],H=p[1],T=Object(n.useState)(0),C=Object(u.a)(T,2),D=C[0],N=C[1];return Object(n.useEffect)((function(){H(1)}),[r]),Object(n.useEffect)((function(){c(!0);var e=setTimeout(Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(m(t.rules,r));case 1:case"end":return e.stop()}}),e)}))),100);return function(){clearTimeout(e)}}),[r,t.rules,I,c]),Object(n.useEffect)((function(){N(f.length)}),[f]),Object(n.useEffect)((function(){c(!0);var e=setTimeout(Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(v(t.headers,f,r)),c(!1);case 2:case"end":return e.stop()}}),e)}))),1e3);return function(){clearTimeout(e)}}),[f,r,t.headers,c]),t.headers&&t.subHeaders&&t.rules?Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{children:["page ",I]}),Object(x.jsxs)("div",{children:[D," results found"]}),Object(x.jsx)(k,{headers:l}),Object(x.jsx)(S,{headers:g(t.subHeaders,f,r)}),Object(x.jsx)(E,{rules:f.slice(0,30*I)}),D>=30*I&&Object(x.jsx)(w.a,{icon:"arrow down",onClick:function(){H(I+1)}})]}):""};var H=function(){var e=Object(n.useState)({}),t=Object(u.a)(e,2),r=t[0],c=t[1],s=Object(n.useState)(!1),a=Object(u.a)(s,2),i=a[0],o=a[1],f=Object(n.useState)(!1),j=Object(u.a)(f,2),m=j[0],v=j[1],g=Object(n.useState)(""),w=Object(u.a)(g,2),k=w[0],S=w[1];return Object(n.useEffect)((function(){o(!0),setTimeout((function(){b.getData().then((function(e){c(d.parseData(e)),o(!1)})).catch((function(e){console.error(e),v(!0),o(!1)}))}),1e3)}),[]),Object(n.useEffect)((function(){console.log(r)}),[r]),Object(x.jsxs)("div",{children:[Object(x.jsx)(l.a,{icon:"search",placeholder:"Search...",onChange:function(e){var t=e.target;S(t.value)},value:k}),Object(x.jsx)(O.a,{active:i}),Object(x.jsx)(p,{hide:!m,children:Object(x.jsx)(h.a,{name:"x",size:"massive",color:"red"})}),r.headers&&r.subHeaders&&r.rules&&Object(x.jsx)(I,{rBook:r,search:k,setIsLoading:o})]})};s.a.render(Object(x.jsx)(H,{}),document.getElementById("root"))}},[[131,1,2]]]);
//# sourceMappingURL=main.9eea42c6.chunk.js.map